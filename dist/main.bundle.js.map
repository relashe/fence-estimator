{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./app/index.build.js","webpack:///./app/js/app.build.js","webpack:///./app/js/constants/colors.constants.js","webpack:///./app/js/constants/icons.constants.js","webpack:///./app/js/constants/index.js","webpack:///./app/js/constants/map.constants.js","webpack:///./app/js/helpers/cache.helpers.js","webpack:///./app/js/helpers/export.helpers.js","webpack:///./app/js/helpers/form.helpers.js","webpack:///./app/js/helpers/index.js","webpack:///./app/js/helpers/map.helpers.js","webpack:///./app/js/helpers/ui.helpers.js","webpack:///./app/js/modules/loadedMap.module.js","webpack:///./app/js/modules/mapElements.module.js","webpack:///./app/js/modules/starter.module.js"],"names":["mapStarter","timing","setTimeout","loadedMapModule","fenceEstimatorTrigger","document","getElementById","addEventListener","COLORS","DEFAULT","STROKE","EDIT","HIGHLIGHT","OPACITY","MAP_SETTINGS","key","options","libraries","version","DEFAULT_COORDINATES","lat","lng","DEFAULT_ZOOM","EXPORT_ZOOM","MAP_OPTIONS","center","zoom","fullscreenControl","mapTypeControl","mapTypeId","streetViewControl","tilt","zoomControl","SHAPE_SETTINGS","fillOpacity","fillColor","strokeColor","strokeWeight","editable","draggable","clickable","visible","SHAPES_CONTROLS","DELETE","CONFIRM_DELETE","EDIT_NAME","mapStorage","mapStorageData","storePaddocks","mapElements","fences","forEach","element","shape","paths","getPath","getArray","paddockIdx","paddockName","type","push","storeFenceEstimatorData","initMapStorageData","JSON","parse","localStorage","getItem","getMapStorageData","data","setItem","stringify","removeFenceEstimatorData","removeItem","generateMapElements","totalPerimeter","table","index","shapeLength","google","maps","geometry","spherical","computeLength","name","length","toFixed","generateMapPdf","img","compressedImageDataUrl","imageCompression","getDataUrlFromFile","pdf","jsPDF","setFontSize","addImage","addPage","text","Promise","resolve","ftpPdfNotification","pdfOutpoutBlob","FormData","append","ftping","fetch","method","mode","headers","Accept","body","emailPdfNotification","downloadFormEmail","value","emailing","printMap","mapImage","width","height","querySelectorAll","innerHTML","window","print","downloadMap","output","console","log","save","closeDownloadBtn","click","downloadFormName","exportMap","mapContainer","mapCanvasAction","clientWidth","clientHeight","mapCanvas","html2canvas","useCORS","imageTimeout","toDataURL","imageFile","getFilefromDataUrl","compressedMapImage","undefined","validateEmailFormat","email","re","test","validateDownloadName","isNameValid","downloadFormNameError","setAttribute","validateDownloadEmail","isEmailValid","downloadFormEmailError","validateDownloadForm","highlightShape","setOptions","editShape","edit","drawingManager","selectedShape","setDrawingMode","clearEdits","mapShapes","confirmDeleteButton","classList","remove","add","deleteButton","drawShapeRow","findAddressDetail","address","detail","shortVersion","find","types","some","displayAddressOnMap","place","map","addressMarker","addressLabel","viewport","fitBounds","setCenter","location","setZoom","setPosition","setVisible","address_components","adr_address","replace","setDraggableMapTools","mapTools","x","y","interact","modifiers","snap","targets","snappers","grid","range","Infinity","relativePoints","restrict","restriction","parentNode","elementRect","top","left","bottom","right","endOnly","inertia","on","event","dx","dy","target","style","transform","setClosableSidebar","sidebar","onClick","sidebarX","sidebarY","mapLengths","addressMapPlace","hasConfirmedTotal","plottingPerimiterTrigger","mapSet","plotPerimiter","calculatePlot","storePlot","plottingShapes","HELPERS","plottingPerimiterLabel","deletePlottingBtn","plottingTooltip","printBtn","downloadBtn","setPlottingBtn","removeAttribute","handleUsePlotting","clearPlotShape","idx","setMap","clearInstanceListeners","splice","resetMapTools","resetFencesTable","setMapReadyForPlotting","isReady","mapIsReady","addressSearchContainer","addressContainer","addressResultsContainer","newSearchBtn","resetEstimator","removePaddockMenu","currentAddressLabel","searchField","getFenceEstimatorData","createPaddockMapShape","shapeMenuContainer","bindPaddockShapeEvents","paddock","addListener","getDrawingMode","drawing","OverlayType","POLYLINE","POLYGON","savePaddockBtn","rightClick","CustomEvent","coordinates","latLng","domEvent","clientY","clientX","dispatchEvent","pathCoordinates","PaddockLengthLabelOverlay","OverlayView","constructor","p","onAdd","createElement","panes","getPanes","overlayLayer","appendChild","draw","overlayProjection","getProjection","sw","fromLatLngToDivPixel","onRemove","removeChild","hide","visibility","show","toggle","toggleDOM","getMap","updateLength","currentShape","path","MVCArray","Array","isArray","segment","segmentCoordinates","LatLng","lengthLabel","vertex","shapeDetails","Polyline","Polygon","exportCanvas","action","handleResetSearch","e","preventDefault","handleDragTool","dragMapTool","lineMapTool","shapeMapTool","handleLineTool","handleShapeTool","handleZoomInTool","getZoom","handleZoomOutTool","handleShapesTable","tagName","toLowerCase","parentElement","dataset","shapeIndex","parseInt","handleEditPaddockName","handleAddPlotting","perimiter","elementorProFrontend","modules","popup","closePopup","handleDeleteAllPlotting","handlePrintMap","handleDownloadMap","formIsValid","createMap","Map","addListenerOnce","Marker","position","animation","Animation","DROP","autocomplete","places","Autocomplete","bindTo","setFields","getPlace","alert","DrawingManager","drawingMode","drawingControl","drawingControlOptions","drawingModes","polylineOptions","polygonOptions","div","bindMapEvents","ignoreKeyPress","keyCode","resetBtn","button","zoomInTool","zoomOutTool","setup","assignElements","plottingResultsContainer","mapLoader","Loader","start","init","load"],"mappings":"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","file":"main.bundle.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"main\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"\" + ({}[chunkId]||chunkId) + \".bundle.js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// The chunk loading function for additional chunks\n \t// Since all referenced chunks are already included\n \t// in this file, this function is empty here.\n \t__webpack_require__.e = function requireEnsure() {\n \t\treturn Promise.resolve();\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","// IMPORTS\n// import \"./styles/styles.scss\";\n\n// JS\nimport \"./js/app.build.js\";\n","import { init as loadedMapModule } from \"./modules/starter.module\";\n\nconst mapStarter = (timing = 200) => {\n  setTimeout(() => {\n    loadedMapModule();\n  }, timing);\n};\n\nvar fenceEstimatorTrigger = document.getElementById(\"fence-estimator-trigger\");\n\nfenceEstimatorTrigger &&\n  fenceEstimatorTrigger.addEventListener(\"click\", () => {\n    mapStarter();\n  });\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  mapStarter(1200);\n});\n","export const COLORS = {\n  DEFAULT: \"#c99700\",\n  STROKE: \"#c99700\",\n  EDIT: \"#ff0000\",\n  HIGHLIGHT: \"#c99700\",\n};\n\nexport const OPACITY = {\n  DEFAULT: 0.25,\n  EDIT: 0.8,\n  HIGHLIGHT: 0.8,\n};\n","// export { default as IconDelete } from \"../../../public/assets/tool-bin.svg\";\n// export { default as IconBoundaryFence } from \"../../../public/assets/tool-boundary-fence.svg\";\n// export { default as IconClosedPaddock } from \"../../../public/assets/tool-closed-paddock-fence.svg\";\n// export { default as IconDrag } from \"../../../public/assets/tool-move.svg\";\n// export { default as IconPrint } from \"../../../public/assets/tool-print.svg\";\n// export { default as IconZoomIn } from \"../../../public/assets/tool-zoom-in.svg\";\n// export { default as IconZoomOut } from \"../../../public/assets/tool-zoom-out.svg\";\n","export * from \"./colors.constants\";\nexport * from \"./map.constants\";\nexport * from \"./icons.constants\";\n","import { COLORS, OPACITY } from \"./colors.constants\";\n\nexport const MAP_SETTINGS = {\n  key: \"AIzaSyDKn1YutebCypgyFrQSP6gtACQ_LbCsEGs\",\n  options: {\n    libraries: [\"drawing\", \"places\", \"geometry\"],\n    version: \"3\",\n  },\n};\nexport const DEFAULT_COORDINATES = {\n  lat: -37.8136276,\n  lng: 144.9630576,\n};\n\nexport const DEFAULT_ZOOM = 15;\nexport const EXPORT_ZOOM = 16;\n\nexport const MAP_OPTIONS = {\n  center: DEFAULT_COORDINATES,\n  zoom: DEFAULT_ZOOM,\n  fullscreenControl: false,\n  mapTypeControl: false,\n  mapTypeId: \"satellite\",\n  streetViewControl: false,\n  tilt: 0,\n  zoomControl: false,\n};\n\nexport const SHAPE_SETTINGS = {\n  DEFAULT: {\n    fillOpacity: OPACITY.DEFAULT,\n    fillColor: COLORS.DEFAULT,\n    strokeColor: COLORS.STROKE,\n    strokeWeight: 3,\n    editable: true,\n    draggable: true,\n    clickable: true,\n    visible: true,\n  },\n  EDIT: {\n    fillOpacity: OPACITY.EDIT,\n    fillColor: COLORS.EDIT,\n    strokeColor: COLORS.EDIT,\n  },\n  HIGHLIGHT: {\n    fillOpacity: OPACITY.HIGHLIGHT,\n    fillColor: COLORS.HIGHLIGHT,\n    strokeColor: COLORS.HIGHLIGHT,\n  },\n};\n\nexport const SHAPES_CONTROLS = {\n  HIGHLIGHT: \"highlight\",\n  EDIT: \"edit\",\n  DELETE: \"delete\",\n  CONFIRM_DELETE: \"confirm-delete\",\n  EDIT_NAME: \"edit-name\",\n};\n","let mapStorage = \"fence-estimator\",\n  mapStorageData = {};\n\n// store paddocks data into session storage\nexport const storePaddocks = (mapElements) => {\n  let fences = [];\n  mapElements.forEach((element) => {\n    const shape = {\n      paths: element.getPath().getArray(),\n      paddockIdx: element.paddockIdx,\n      paddockName: element.paddockName,\n      type: element.type,\n    };\n\n    fences.push(shape);\n  });\n\n  storeFenceEstimatorData({\n    fences,\n  });\n};\n\nexport const initMapStorageData = () => {\n  mapStorageData = JSON.parse(localStorage.getItem(mapStorage));\n};\n\nexport const getMapStorageData = () => {\n  initMapStorageData();\n\n  return mapStorageData;\n};\n\nexport const storeFenceEstimatorData = (data) => {\n  if (data) {\n    mapStorageData = {\n      ...mapStorageData,\n      ...data,\n    };\n  }\n\n  localStorage.setItem(`${mapStorage}`, JSON.stringify(mapStorageData));\n};\n\nexport const removeFenceEstimatorData = () => {\n  localStorage.removeItem(mapStorage);\n};\n","import html2canvas from \"html2canvas\";\nimport jsPDF from \"jspdf\";\nimport {\n  closeDownloadBtn,\n  downloadFormEmail,\n  downloadFormName,\n} from \"../modules/mapElements.module\";\nimport { google } from \"../modules/starter.module\";\nimport imageCompression from \"browser-image-compression\";\n\nconst generateMapElements = (mapElements) => {\n  let totalPerimeter = 0;\n  let table = [];\n\n  mapElements.forEach((shape, index) => {\n    const shapeLength = google.maps.geometry.spherical.computeLength(\n      shape.getPath().getArray()\n    );\n\n    table.push({\n      name: `${shape.paddockName}`,\n      length: `${shapeLength.toFixed(0)}`,\n    });\n\n    totalPerimeter += shapeLength.toFixed(0);\n  });\n\n  return {\n    table,\n    totalPerimeter,\n  };\n};\n\nconst generateMapPdf = async (img, mapElements) => {\n  const { table, totalPerimeter } = generateMapElements(mapElements);\n  const compressedImageDataUrl = await imageCompression.getDataUrlFromFile(img);\n\n  let pdf = new jsPDF();\n  pdf.setFontSize(12);\n\n  pdf.addImage(compressedImageDataUrl, \"JPEG\", 15, 40, 150, 150);\n\n  pdf.addPage();\n\n  pdf.table(10, 10, table, [\"name\", \"length\"]);\n\n  pdf.text([`Total: ${totalPerimeter}m`], 10, 10 * (table.length + 1) + 20);\n\n  return Promise.resolve(pdf);\n};\n\nconst ftpPdfNotification = async (pdfOutpoutBlob) => {\n  const data = new FormData();\n\n  data.append(\"pdfBlob\", pdfOutpoutBlob);\n\n  const ftping = await fetch(\n    \"https://relashe-fence-estimator.netlify.app/.netlify/functions/ftp-file\",\n    {\n      method: \"POST\",\n      mode: \"no-cors\",\n      headers: {\n        Accept: \"*/*\",\n      },\n      body: data,\n    }\n  );\n\n  return Promise.resolve(ftping);\n};\n\nconst emailPdfNotification = async (pdfOutpoutBlob) => {\n  const data = new FormData();\n\n  data.append(\"destination\", downloadFormEmail.value);\n  data.append(\"pdfBlob\", pdfOutpoutBlob);\n\n  const emailing = await fetch(\n    \"https://relashe-fence-estimator.netlify.app/.netlify/functions/email-file\",\n    {\n      method: \"POST\",\n      mode: \"no-cors\",\n      headers: {\n        Accept: \"*/*\",\n      },\n      body: data,\n    }\n  );\n\n  return Promise.resolve(emailing);\n};\n\nconst printMap = (mapImage, width, height) => {\n  document.querySelectorAll(\".print\")[0].innerHTML = `\n          <img src=\"${mapImage}\" style=\"width: ${width}px; height: ${height}px;\" />\n          `;\n\n  setTimeout(() => {\n    window.print();\n  }, 0);\n};\n\nconst downloadMap = async (mapImage, mapElements) => {\n  // generate PDF\n  // email customer details\n  // ftp to client\n\n  const pdf = await generateMapPdf(mapImage, mapElements);\n\n  const pdfOutpoutBlob = pdf.output(\"blob\");\n  console.log(pdfOutpoutBlob);\n\n  await emailPdfNotification(pdfOutpoutBlob);\n\n  await ftpPdfNotification(pdfOutpoutBlob);\n\n  // TODO - PDF name\n  pdf.save(\"Fence Estimator - my fence.pdf\");\n\n  // close and clear\n  closeDownloadBtn.click();\n  downloadFormName.value = \"\";\n  downloadFormEmail.value = \"\";\n};\n\nexport const exportMap = async (mapContainer, mapCanvasAction, mapElements) => {\n  const width = mapContainer.clientWidth;\n  const height = mapContainer.clientHeight;\n\n  const mapCanvas = await html2canvas(mapContainer, {\n    useCORS: true,\n    imageTimeout: 0,\n    width,\n    height,\n  });\n\n  const mapImage = mapCanvas.toDataURL(\"image/jpeg,1.0\");\n\n  if (mapCanvasAction === \"download\") {\n    const imageFile = await imageCompression.getFilefromDataUrl(\n      mapImage,\n      \"fence-map\"\n    );\n\n    const compressedMapImage = await imageCompression(imageFile, {});\n    downloadMap(compressedMapImage, mapElements);\n  }\n\n  if (mapCanvasAction === \"print\") {\n    printMap(mapImage, width, height);\n  }\n  mapCanvasAction = undefined;\n};\n","import {\n  downloadFormName,\n  downloadFormNameError,\n  downloadFormEmail,\n  downloadFormEmailError,\n} from \"../modules/mapElements.module\";\n\nconst validateEmailFormat = (email) => {\n  var re = /\\S+@\\S+\\.\\S+/;\n  return re.test(email);\n};\n\nexport const validateDownloadName = () => {\n  let isNameValid = true;\n  // validate name\n  if (downloadFormName.value === \"\") {\n    isNameValid = false;\n    downloadFormNameError.innerHTML = \"Please add your name\";\n  } else {\n    isNameValid = true;\n    downloadFormNameError.innerHTML = \"\";\n  }\n\n  downloadFormNameError.setAttribute(\"aria-hidden\", !isNameValid);\n\n  return isNameValid;\n};\n\nexport const validateDownloadEmail = () => {\n  let isEmailValid = true;\n\n  // validate email\n  if (downloadFormEmail.value === \"\") {\n    isEmailValid = false;\n    downloadFormEmailError.innerHTML = \"Please insert your email\";\n  } else if (!validateEmailFormat(downloadFormEmail.value)) {\n    isEmailValid = false;\n    downloadFormEmailError.innerHTML =\n      \"Please insert an email address in the right format.\";\n  } else {\n    isEmailValid = true;\n    downloadFormEmailError.innerHTML = \"\";\n  }\n\n  return isEmailValid;\n};\n\nexport const validateDownloadForm = () => {\n  const isNameValid = validateDownloadName();\n  const isEmailValid = validateDownloadEmail();\n\n  return Promise.resolve(isNameValid && isEmailValid);\n};\n","export * from \"./map.helpers\";\nexport * from \"./cache.helpers\";\nexport * from \"./ui.helpers\";\nexport * from \"./export.helpers\";\nexport * from \"./form.helpers\";\n","import { SHAPES_CONTROLS, SHAPE_SETTINGS } from \"../constants\";\n\nexport const highlightShape = (shape) => {\n  if (!shape) {\n    return;\n  }\n\n  shape.setOptions(SHAPE_SETTINGS.HIGHLIGHT);\n\n  setTimeout(() => {\n    shape.setOptions(SHAPE_SETTINGS.DEFAULT);\n  }, 500);\n};\n\nexport const editShape = (\n  shape,\n  edit = true,\n  drawingManager,\n  selectedShape\n) => {\n  if (!shape || shape === selectedShape) {\n    return;\n  }\n\n  if (edit) {\n    drawingManager && drawingManager.setDrawingMode(null);\n\n    shape.setOptions(SHAPE_SETTINGS.EDIT);\n\n    selectedShape = shape;\n  } else {\n    shape.setOptions(SHAPE_SETTINGS.DEFAULT);\n    selectedShape = null;\n  }\n};\n\nexport const clearEdits = (mapShapes) => {\n  if (!mapShapes) {\n    return;\n  }\n\n  mapShapes.forEach((shape) => {\n    editShape(shape, false);\n  });\n\n  document\n    .querySelectorAll(`[data-action=\"${SHAPES_CONTROLS.CONFIRM_DELETE}\"]`)\n    .forEach((confirmDeleteButton) => {\n      confirmDeleteButton.classList.remove(\"d-block\");\n      confirmDeleteButton.classList.add(\"d-none\");\n    });\n\n  document\n    .querySelectorAll(`[data-action=\"${SHAPES_CONTROLS.DELETE}\"]`)\n    .forEach((deleteButton) => {\n      deleteButton.classList.remove(\"d-none\");\n      deleteButton.classList.add(\"d-block\");\n    });\n};\n\nexport const drawShapeRow = (paddockName, shapeLength, index) => {\n  return `\n    <div class=\"created-fence\" data-action=\"${\n      SHAPES_CONTROLS.HIGHLIGHT\n    }\" data-shape=\"${index}\">\n      <div class=\"created-fence__section\">\n        <p class=\"created-fence__section-label\">Name</p>\n        <input id=\"paddock-description-${index}\" value=\"${paddockName}\" type=\"test\" data-shape=\"${index}\" data-action=\"${\n    SHAPES_CONTROLS.EDIT_NAME\n  }\" data-shape=\"${index}\"  class=\"created-fence__name\" autocomplete=\"off\"/>\n      </div>\n      <div class=\"created-fence__section\">\n        <p class=\"created-fence__section-label\">Length</p>\n        <p class=\"created-fence__length\">${shapeLength.toFixed(0)}m </p>\n      </div>\n      <div class=\"created-fence__section created-fence__section--actions\">\n        <button type=\"button\" data-action=\"${\n          SHAPES_CONTROLS.DELETE\n        }\" data-shape=\"${index}\" class=\"btn-control-icons btn-control-icons--delete d-block created-fence__delete\">\n          <img class=\"created-fence__icon\" src=\"https://staging-stockandnoble.kinsta.cloud/wp-content/themes/astra-stockandnoble/assets/tool-bin.svg\"/>\n        </button>\n      </div>\n    </div>\n  `;\n};\n\nconst findAddressDetail = (address, detail, shortVersion = false) => {\n  if (!address) {\n    return;\n  }\n\n  return address.find((element) =>\n    element.types.some((type) => type === detail)\n  )[shortVersion ? \"short_name\" : \"long_name\"];\n};\n\nexport const displayAddressOnMap = (\n  place,\n  map,\n  addressMarker,\n  addressLabel\n) => {\n  if (!place || !map) {\n    return;\n  }\n\n  // If the place has a geometry, then present it on a map.\n  if (place.geometry.viewport) {\n    map.fitBounds(place.geometry.viewport);\n  } else {\n    map.setCenter(place.geometry.location);\n    map.setZoom(16);\n  }\n\n  // display the marker on map\n  if (addressMarker) {\n    addressMarker.setPosition(place.geometry.location);\n    addressMarker.setVisible(true);\n  }\n\n  // show the address on map controllers\n  const address = place.address_components;\n\n  if (addressLabel) {\n    addressLabel.innerHTML = `\n    <span class=\"address-line-1\">${findAddressDetail(\n      address,\n      \"locality\"\n    )}, ${findAddressDetail(address, \"administrative_area_level_2\")}</span>\n    <span class=\"address-line-2\">${findAddressDetail(\n      address,\n      \"postal_code\"\n    )} ${findAddressDetail(\n      address,\n      \"administrative_area_level_1\"\n    )}  ${findAddressDetail(address, \"country\", true)}</span>`;\n    place.adr_address.replace(/\\,/g, \"\");\n  }\n};\n","import interact from \"interactjs\";\n\nexport const setDraggableMapTools = (mapTools) => {\n  let x = 0;\n  let y = 0;\n\n  interact(mapTools)\n    .draggable({\n      modifiers: [\n        interact.modifiers.snap({\n          targets: [interact.snappers.grid({ x: 30, y: 30 })],\n          range: Infinity,\n          relativePoints: [{ x: 0, y: 0 }],\n        }),\n        interact.modifiers.restrict({\n          restriction: mapTools.parentNode,\n          elementRect: { top: 0, left: 0, bottom: 1, right: 1 },\n          endOnly: true,\n        }),\n      ],\n      inertia: true,\n    })\n    .on(\"dragmove\", function (event) {\n      x += event.dx;\n      y += event.dy;\n\n      event.target.style.transform = \"translate(\" + x + \"px, \" + y + \"px)\";\n    });\n};\n\nexport const setClosableSidebar = (sidebar, onClick) => {\n  let sidebarX = 0;\n  let sidebarY = 0;\n\n  interact(sidebar)\n    .draggable({\n      modifiers: [\n        interact.modifiers.snap({\n          targets: [interact.snappers.grid({ x: 30, y: 30 })],\n          range: Infinity,\n          relativePoints: [{ x: 0, y: 0 }],\n        }),\n        interact.modifiers.restrict({\n          restriction: sidebar.parentNode,\n          elementRect: { top: 0, left: 0, bottom: 1, right: 1 },\n          endOnly: true,\n        }),\n      ],\n      inertia: true,\n    })\n    .on(\"dragmove\", function (event) {\n      sidebarX += event.dx;\n      sidebarY += event.dy;\n\n      event.target.style.transform =\n        \"translate(\" + sidebarX + \"px, \" + sidebarY + \"px)\";\n    })\n    .on(\"click\", onClick);\n};\n","import {\n  DEFAULT_COORDINATES,\n  DEFAULT_ZOOM,\n  EXPORT_ZOOM,\n  MAP_OPTIONS,\n  SHAPES_CONTROLS,\n  SHAPE_SETTINGS,\n} from \"../constants\";\nimport * as HELPERS from \"../helpers\";\n\nimport { google } from \"./starter.module\";\n\nimport {\n  validateDownloadEmail,\n  validateDownloadForm,\n  validateDownloadName,\n} from \"../helpers\";\nimport {\n  addressContainer,\n  addressResultsContainer,\n  addressSearchContainer,\n  assignElements,\n  currentAddressLabel,\n  deletePlottingBtn,\n  downloadBtn,\n  downloadFormEmail,\n  downloadFormName,\n  dragMapTool,\n  lineMapTool,\n  mapContainer,\n  mapTools,\n  newSearchBtn,\n  plottingPerimiterLabel,\n  plottingShapes,\n  plottingTooltip,\n  printBtn,\n  resetBtn,\n  savePaddockBtn,\n  searchField,\n  setPlottingBtn,\n  shapeMapTool,\n  shapeMenuContainer,\n  sidebar,\n  zoomInTool,\n  zoomOutTool,\n} from \"./mapElements.module\";\n\nlet map,\n  drawingManager,\n  mapElements = [],\n  mapLengths = [],\n  selectedShape = null,\n  addressMapPlace,\n  hasConfirmedTotal = false,\n  plottingPerimiterTrigger;\n\n// flags\nlet mapSet = false;\n\n// Values\nlet addressMarker,\n  mapCanvasAction,\n  plotPerimiter = 0;\n\n// ui\nconst calculatePlot = (storePlot = true) => {\n  let totalPerimeter = 0;\n\n  // re-draw table and recalculate\n  // go through each shape/line and:\n  // 1. add length to total\n  // 2. create row (button handlers have been assigned to table wrapper)\n  // 3. display total\n  // 4. update caching\n\n  plottingShapes.innerHTML = \"\";\n\n  mapElements.forEach((shape, index) => {\n    const shapeLength = google.maps.geometry.spherical.computeLength(\n      shape.getPath().getArray()\n    );\n\n    // 1.\n    totalPerimeter += shapeLength;\n    // 2.\n    plottingShapes.innerHTML += HELPERS.drawShapeRow(\n      shape.paddockName,\n      shapeLength,\n      index\n    );\n  });\n\n  // 3.\n  plotPerimiter = totalPerimeter.toFixed(0);\n  plottingPerimiterLabel.innerHTML = `${plotPerimiter || 0}m`;\n  // 4.\n  storePlot && HELPERS.storePaddocks(mapElements);\n\n  // update available action buttons\n  deletePlottingBtn.setAttribute(\"aria-hidden\", !mapElements.length);\n  plottingTooltip.setAttribute(\"aria-hidden\", !!mapElements.length);\n\n  if (!mapElements.length) {\n    printBtn.setAttribute(\"disabled\", true);\n    downloadBtn.setAttribute(\"disabled\", true);\n    setPlottingBtn.setAttribute(\"disabled\", true);\n  } else {\n    printBtn.removeAttribute(\"disabled\");\n    downloadBtn.removeAttribute(\"disabled\");\n    setPlottingBtn.removeAttribute(\"disabled\");\n  }\n\n  if (hasConfirmedTotal) {\n    // if the user wants to use the list of shapes/lines created, use it.\n    handleUsePlotting();\n  }\n};\n\nconst clearPlotShape = (idx) => {\n  if (mapElements.length && mapElements[idx]) {\n    mapElements[idx].setMap(null);\n    mapLengths[idx].setMap(null);\n    google.maps.event.clearInstanceListeners(mapElements[idx]);\n\n    mapElements.splice(idx, 1);\n  }\n\n  calculatePlot();\n\n  if (!mapElements.length) {\n    resetMapTools();\n  }\n};\n\n// remove all shapes from the map\nconst resetFencesTable = () => {\n  // go through all shapes and remove them from the map before clearing the array\n  if (mapElements.length) {\n    mapElements.forEach((shape) => {\n      shape.setMap(null);\n    });\n\n    mapLengths.forEach((length) => {\n      length.setMap(null);\n    });\n\n    mapElements = [];\n    mapLengths = [];\n  }\n\n  plotPerimiter = 0;\n\n  plottingShapes.innerHTML = \"\";\n  plottingPerimiterLabel.innerHTML = \"\";\n\n  deletePlottingBtn.setAttribute(\"aria-hidden\", !mapElements.length);\n\n  // update cache\n  HELPERS.removeFenceEstimatorData();\n};\n\nconst resetMapTools = () => {\n  drawingManager.setDrawingMode(null);\n};\n\n// this is for when the estimator has an address and\n// the user can start adding fences\nexport const setMapReadyForPlotting = (isReady) => {\n  const mapIsReady = isReady !== undefined ? !!isReady : !!addressMapPlace;\n\n  if (!addressMapPlace) {\n    return;\n  }\n\n  // show/hide address and address search field\n  addressSearchContainer.setAttribute(\"aria-hidden\", !!mapIsReady);\n  addressContainer.setAttribute(\"aria-hidden\", !mapIsReady);\n  addressResultsContainer.setAttribute(\"aria-hidden\", !mapIsReady);\n\n  // show/hide search tooltip\n  plottingTooltip.setAttribute(\"aria-hidden\", !!mapIsReady ? true : false);\n\n  // show/hide reset button\n  newSearchBtn.classList.remove(!!mapIsReady ? \"d-none\" : \"d-block\");\n  newSearchBtn.classList.add(!!mapIsReady ? \"d-block\" : \"d-none\");\n\n  // set the map to drawing state\n  drawingManager.setDrawingMode(null);\n};\n\nconst resetEstimator = () => {\n  resetFencesTable();\n  resetMapTools();\n  removePaddockMenu();\n\n  addressMarker.setVisible(false);\n\n  map.setZoom(DEFAULT_ZOOM);\n  map.setCenter({\n    lat: DEFAULT_COORDINATES.lat,\n    lng: DEFAULT_COORDINATES.lng,\n  });\n\n  currentAddressLabel.innerHTML = \"\";\n  searchField.value = \"\";\n\n  calculatePlot(false);\n  setMapReadyForPlotting(false);\n};\n\n// caching\nconst getFenceEstimatorData = () => {\n  const mapStorageData = HELPERS.getMapStorageData();\n\n  if (mapStorageData) {\n    addressMapPlace = mapStorageData.place;\n\n    // 1. display stored address\n    HELPERS.displayAddressOnMap(\n      addressMapPlace,\n      map,\n      addressMarker,\n      currentAddressLabel\n    );\n\n    // 2. create fences on map\n    mapStorageData.fences?.forEach((shape) => {\n      const { type, paddockIdx, paddockName, paths } = shape;\n\n      // setup paddock and add it to map\n      createPaddockMapShape(paddockIdx, paddockName, type, paths);\n    });\n\n    // 3. set map ready to draw more fences\n    setMapReadyForPlotting();\n  }\n\n  // update table and total based on current data\n  calculatePlot(false);\n\n  mapSet = true;\n};\n\n// paddocks\nconst removePaddockMenu = () => {\n  map.setOptions({\n    draggable: true,\n  });\n\n  shapeMenuContainer.setAttribute(\"aria-hidden\", true);\n  shapeMenuContainer.innerHTML = \"\";\n};\n\nconst bindPaddockShapeEvents = (paddock) => {\n  // when the shape is left\n  // (re)calculate the measurements\n  google.maps.event.addListener(paddock, \"mouseup\", () => {\n    calculatePlot();\n  });\n\n  // when hovering over the shape\n  google.maps.event.addListener(paddock, \"mouseover\", () => {\n    if (\n      drawingManager.getDrawingMode() ===\n        google.maps.drawing.OverlayType.POLYLINE ||\n      drawingManager.getDrawingMode() ===\n        google.maps.drawing.OverlayType.POLYGON\n    ) {\n      HELPERS.clearEdits(mapElements);\n      HELPERS.editShape(paddock, true, drawingManager, selectedShape);\n      savePaddockBtn.setAttribute(\"aria-hidden\", true);\n    }\n  });\n\n  // when clicking on a shape\n  google.maps.event.addListener(paddock, \"click\", () => {\n    if (drawingManager.getDrawingMode() === null) {\n      HELPERS.clearEdits(mapElements);\n      HELPERS.editShape(paddock, true, drawingManager, selectedShape);\n      savePaddockBtn.setAttribute(\"aria-hidden\", true);\n\n      removePaddockMenu();\n    }\n  });\n\n  // this listener is for right click events\n  // documentation says rightclick has been deprecated\n  // (https://developers.google.com/maps/documentation/javascript/reference/polygon?hl=en#Polyline.rightclick)\n  // NOTE - no sure if other events may call this\n  paddock.addListener(\"contextmenu\", (event) => {\n    const rightClick = new CustomEvent(\"fence-estimator-shape-menu\", {\n      detail: {\n        paddock: {\n          name: paddock.paddockName,\n          index: paddock.paddockIdx,\n          coordinates: event.latLng,\n        },\n        top: event.domEvent.clientY,\n        left: event.domEvent.clientX,\n      },\n    });\n\n    window.dispatchEvent(rightClick);\n  });\n};\n\nexport const createPaddockMapShape = (\n  paddockIdx,\n  paddockName,\n  type,\n  pathCoordinates\n) => {\n  /**\n   * Custom overlay for shape menu\n   */\n  class PaddockLengthLabelOverlay extends google.maps.OverlayView {\n    length;\n    coordinates;\n    p;\n    constructor(coordinates, length) {\n      super();\n      this.length = length;\n      this.coordinates = coordinates;\n    }\n\n    /**\n     * onAdd is called when the map's panes are ready and the overlay has been\n     * added to the map.\n     */\n    onAdd() {\n      this.p = document.createElement(\"p\");\n\n      // style contents\n      this.p.classList.add(\"paddock-length\");\n      this.p.innerHTML = `${this.length.toFixed()}m`;\n\n      // Add the element to the \"overlayLayer\" pane.\n      const panes = this.getPanes();\n\n      panes.overlayLayer.appendChild(this.p);\n    }\n\n    draw() {\n      // We use the south-west and north-east\n      // coordinates of the overlay to peg it to the correct position and size.\n      // To do this, we need to retrieve the projection from the overlay.\n      const overlayProjection = this.getProjection();\n\n      // Retrieve the south-west and north-east coordinates of this overlay\n      // in LatLngs and convert them to pixel coordinates.\n      // We'll use these coordinates to resize the div.\n      const sw = overlayProjection.fromLatLngToDivPixel(this.coordinates);\n      if (this.p) {\n        this.p.style.left = sw.x + 10 + \"px\";\n        this.p.style.top = sw.y + 10 + \"px\";\n      }\n    }\n    /**\n     * The onRemove() method will be called automatically from the API if\n     * we ever set the overlay's map property to 'null'.\n     */\n    onRemove() {\n      if (this.p) {\n        this.p.parentNode.removeChild(this.p);\n        delete this.p;\n      }\n    }\n    /**\n     *  Set the visibility to 'hidden' or 'visible'.\n     */\n    hide() {\n      if (this.p) {\n        this.p.style.visibility = \"hidden\";\n      }\n    }\n    show() {\n      if (this.p) {\n        this.p.style.visibility = \"visible\";\n      }\n    }\n    toggle() {\n      if (this.p) {\n        if (this.p.style.visibility === \"hidden\") {\n          this.show();\n        } else {\n          this.hide();\n        }\n      }\n    }\n    toggleDOM(map) {\n      if (this.getMap()) {\n        this.setMap(null);\n      } else {\n        this.setMap(map);\n      }\n    }\n    updateLength(length) {\n      this.length = length;\n      this.p.innerHTML = `${this.length.toFixed()}m`;\n    }\n  }\n\n  let currentShape;\n\n  let path = new google.maps.MVCArray();\n\n  if (Array.isArray(pathCoordinates)) {\n    pathCoordinates.forEach((segment) => {\n      if (typeof segment.lat === \"function\") {\n        path.push(segment);\n      } else {\n        const segmentCoordinates = new google.maps.LatLng(\n          segment.lat,\n          segment.lng\n        );\n        path.push(segmentCoordinates);\n      }\n    });\n  } else {\n    if (typeof pathCoordinates.lat === \"function\") {\n      path.push(pathCoordinates);\n    } else {\n      const segmentCoordinates = new google.maps.LatLng(\n        pathCoordinates.lat,\n        pathCoordinates.lng\n      );\n      path.push(segmentCoordinates);\n    }\n  }\n\n  const shapeLength = google.maps.geometry.spherical.computeLength(\n    path.getArray()\n  );\n\n  const lengthLabel = new PaddockLengthLabelOverlay(\n    { lat: path.getArray()[0].lat(), lng: path.getArray()[0].lng() },\n    shapeLength\n  );\n\n  google.maps.event.addListener(path, \"insert_at\", function (vertex) {\n    lengthLabel.updateLength(\n      google.maps.geometry.spherical.computeLength(path.getArray())\n    );\n  });\n\n  google.maps.event.addListener(path, \"set_at\", function (vertex) {\n    lengthLabel.updateLength(\n      google.maps.geometry.spherical.computeLength(path.getArray())\n    );\n  });\n\n  google.maps.event.addListener(path, \"mousedown\", function (vertex) {\n    lengthLabel.updateLength(\n      google.maps.geometry.spherical.computeLength(path.getArray())\n    );\n  });\n\n  const shapeDetails = {\n    ...SHAPE_SETTINGS.DEFAULT,\n    paddockIdx,\n    paddockName,\n    type,\n    map,\n    path,\n  };\n\n  if (type === google.maps.drawing.OverlayType.POLYLINE) {\n    currentShape = new google.maps.Polyline(shapeDetails);\n  }\n  if (type === google.maps.drawing.OverlayType.POLYGON) {\n    currentShape = new google.maps.Polygon(shapeDetails);\n  }\n\n  // set up paddock with listening events\n  bindPaddockShapeEvents(currentShape);\n\n  lengthLabel.setMap(map);\n\n  mapElements.push(currentShape);\n  mapLengths.push(lengthLabel);\n  plottingTooltip.setAttribute(\"aria-hidden\", true);\n};\n\n// adjust map to prepare canvas image\nconst exportCanvas = (action) => {\n  mapCanvasAction = action;\n\n  if (addressMapPlace.geometry.viewport) {\n    map.fitBounds(addressMapPlace.geometry.viewport);\n  } else {\n    map.setCenter(addressMapPlace.geometry.location);\n  }\n\n  map.setZoom(EXPORT_ZOOM);\n\n  setTimeout(() => {\n    HELPERS.exportMap(mapContainer, mapCanvasAction, mapElements);\n  }, 500);\n};\n\n// events\nconst handleResetSearch = (e) => {\n  e.preventDefault();\n  resetEstimator();\n};\n\nconst handleDragTool = (e) => {\n  e.preventDefault();\n\n  dragMapTool.classList.add(\"map-tool--active\");\n  lineMapTool.classList.remove(\"map-tool--active\");\n  shapeMapTool.classList.remove(\"map-tool--active\");\n\n  drawingManager.setDrawingMode(null);\n\n  HELPERS.clearEdits(mapElements);\n  removePaddockMenu();\n};\n\nconst handleLineTool = (e) => {\n  e.preventDefault();\n\n  lineMapTool.classList.add(\"map-tool--active\");\n  dragMapTool.classList.remove(\"map-tool--active\");\n  shapeMapTool.classList.remove(\"map-tool--active\");\n\n  drawingManager.setDrawingMode(google.maps.drawing.OverlayType.POLYLINE);\n\n  HELPERS.clearEdits(mapElements);\n  removePaddockMenu();\n};\n\nconst handleShapeTool = (e) => {\n  e.preventDefault();\n\n  shapeMapTool.classList.add(\"map-tool--active\");\n  dragMapTool.classList.remove(\"map-tool--active\");\n  lineMapTool.classList.remove(\"map-tool--active\");\n\n  drawingManager.setDrawingMode(google.maps.drawing.OverlayType.POLYGON);\n\n  HELPERS.clearEdits(mapElements);\n  removePaddockMenu();\n};\n\nconst handleZoomInTool = (e) => {\n  e.preventDefault();\n\n  map.setZoom(map.getZoom() + 1);\n\n  HELPERS.clearEdits(mapElements);\n  removePaddockMenu();\n};\n\nconst handleZoomOutTool = (e) => {\n  e.preventDefault();\n\n  map.setZoom(map.getZoom() - 1);\n\n  HELPERS.clearEdits(mapElements);\n  removePaddockMenu();\n};\n\nconst handleShapesTable = (e) => {\n  const element =\n    e.target.tagName.toLowerCase() === \"button\" ||\n    e.target.tagName.toLowerCase() === \"input\"\n      ? e.target\n      : e.target.parentElement;\n\n  if (element.dataset.shape === undefined || !element.dataset.action) {\n    return;\n  }\n\n  const shapeIndex = parseInt(element.dataset.shape);\n  const shape = mapElements[shapeIndex];\n\n  if (!shape) {\n    return;\n  }\n\n  removePaddockMenu();\n\n  switch (element.dataset.action) {\n    case SHAPES_CONTROLS.HIGHLIGHT:\n      HELPERS.highlightShape(shape);\n      break;\n    case SHAPES_CONTROLS.EDIT:\n    case SHAPES_CONTROLS.EDIT_NAME:\n      HELPERS.clearEdits(mapElements);\n      HELPERS.editShape(shape, true, drawingManager, selectedShape);\n      savePaddockBtn.setAttribute(\"aria-hidden\", true);\n      break;\n    case SHAPES_CONTROLS.DELETE:\n      HELPERS.clearEdits(mapElements);\n      HELPERS.editShape(shape, true, drawingManager, selectedShape);\n      savePaddockBtn.setAttribute(\"aria-hidden\", true);\n\n      clearPlotShape(shapeIndex);\n      drawingManager.setDrawingMode(null);\n      break;\n  }\n};\n\nconst handleEditPaddockName = (e) => {\n  const element =\n    e.target.tagName.toLowerCase() === \"input\"\n      ? e.target\n      : e.target.parentElement;\n\n  if (element.dataset.shape === undefined || !element.dataset.action) {\n    return;\n  }\n\n  const shapeIndex = parseInt(element.dataset.shape);\n  const shape = mapElements[shapeIndex];\n\n  if (!shape) {\n    return;\n  }\n\n  shape.paddockName = element.value;\n\n  // update local storage\n  HELPERS.storePaddocks(mapElements);\n};\n\nconst handleAddPlotting = (e) => {\n  e.preventDefault();\n\n  drawingManager.setDrawingMode(null);\n  HELPERS.clearEdits(mapElements);\n\n  savePaddockBtn.setAttribute(\"aria-hidden\", false);\n};\n\nconst handleUsePlotting = (e) => {\n  e && e.preventDefault();\n\n  hasConfirmedTotal = true;\n\n  plottingPerimiterTrigger = new CustomEvent(\"fence-estimator-results\", {\n    detail: { perimiter: plotPerimiter },\n  });\n  window.dispatchEvent(plottingPerimiterTrigger);\n  plottingPerimiterTrigger = null;\n\n  if (typeof elementorProFrontend !== \"undefined\") {\n    elementorProFrontend.modules.popup.closePopup({}, e);\n  }\n};\n\nconst handleDeleteAllPlotting = (e) => {\n  e.preventDefault();\n\n  resetFencesTable();\n  resetMapTools();\n};\n\nconst handlePrintMap = (e) => {\n  e?.preventDefault();\n\n  exportCanvas(\"print\");\n};\n\nconst handleDownloadMap = async (e) => {\n  e?.preventDefault();\n\n  const formIsValid = await validateDownloadForm();\n\n  if (formIsValid) {\n    exportCanvas(\"download\");\n  }\n};\n\n// map\nexport const createMap = () => {\n  map = new google.maps.Map(mapContainer, MAP_OPTIONS);\n\n  google.maps.event.addListenerOnce(map, \"tilesloaded\", function () {\n    // get elements from cache\n    getFenceEstimatorData();\n  });\n\n  google.maps.event.addListener(map, \"zoom_changed\", function () {\n    //only wait for zoom change on print\n    // mapCanvasAction === \"print\" &&\n    // HELPERS.exportMap(mapContainer, mapCanvasAction, mapElements);\n  });\n\n  // Marker\n  addressMarker = new google.maps.Marker({\n    position: new google.maps.LatLng(\n      DEFAULT_COORDINATES.lat,\n      DEFAULT_COORDINATES.lng\n    ),\n    map: map,\n    animation: google.maps.Animation.DROP,\n    clickable: false,\n    visible: false,\n  });\n\n  // Auto complete\n  const autocomplete = new google.maps.places.Autocomplete(searchField);\n\n  autocomplete.bindTo(\"bounds\", map);\n  autocomplete.setFields([\n    \"address_components\",\n    \"adr_address\",\n    \"geometry\",\n    \"icon\",\n    \"name\",\n  ]);\n\n  autocomplete.addListener(\"place_changed\", function () {\n    addressMarker.setVisible(false);\n    addressMapPlace = autocomplete.getPlace();\n\n    if (!addressMapPlace.geometry) {\n      window.alert(\n        \"No details available for input: '\" + addressMapPlace.name + \"'\"\n      );\n      return;\n    }\n\n    // 1. add the place to the location storage\n    HELPERS.storeFenceEstimatorData({\n      place: addressMapPlace,\n    });\n\n    // 2. display location\n    HELPERS.displayAddressOnMap(\n      addressMapPlace,\n      map,\n      addressMarker,\n      currentAddressLabel\n    );\n\n    // 3. begin drawing fences\n    setMapReadyForPlotting();\n  });\n\n  // Drawing\n  drawingManager = new google.maps.drawing.DrawingManager({\n    map,\n    drawingMode: null,\n    drawingControl: false,\n    drawingControlOptions: {\n      drawingModes: [\n        google.maps.drawing.OverlayType.POLYLINE,\n        google.maps.drawing.OverlayType.POLYGON,\n      ],\n    },\n    polylineOptions: {\n      ...SHAPE_SETTINGS.DEFAULT,\n    },\n    polygonOptions: {\n      ...SHAPE_SETTINGS.DEFAULT,\n    },\n  });\n\n  google.maps.event.addListener(\n    drawingManager,\n    \"polylinecomplete\",\n    function (e) {\n      // create polyline and add it to array of elements\n      // to display totals in table as lines are added\n      const path = e.getPath().getArray();\n\n      createPaddockMapShape(\n        mapElements.length,\n        `${mapElements.length + 1}--Boundary Fence`,\n        google.maps.drawing.OverlayType.POLYLINE,\n        path\n      );\n\n      drawingManager.setDrawingMode(null);\n\n      e.setMap(null);\n\n      calculatePlot();\n    }\n  );\n\n  google.maps.event.addListener(\n    drawingManager,\n    \"polygoncomplete\",\n    function (e) {\n      // create polygon and add it to array of elements\n      // to display totals in table as lines are added\n      const path = e.getPath().getArray();\n\n      createPaddockMapShape(\n        mapElements.length,\n        `${mapElements.length + 1}--Paddock Fence`,\n        google.maps.drawing.OverlayType.POLYGON,\n        path\n      );\n\n      drawingManager.setDrawingMode(null);\n\n      e.setMap(null);\n\n      calculatePlot();\n    }\n  );\n\n  google.maps.event.addListener(map, \"click\", function (e) {\n    removePaddockMenu();\n  });\n\n  window.addEventListener(\"fence-estimator-shape-menu\", function (e) {\n    if (!e.detail.paddock) {\n      return false;\n    }\n\n    const paddock = e.detail.paddock;\n\n    const div = document.createElement(\"div\");\n\n    // style contents\n    div.classList.add(\"paddock-menu\");\n    div.style.top = e.detail.top;\n    div.style.left = e.detail.left;\n    div.innerHTML = `\n        <p class=\"paddock-menu__title\">${paddock.name}</p>\n        <button type=\"button\" data-action=\"${SHAPES_CONTROLS.DELETE}\" data-shape=\"${paddock.index}\" class=\"paddock-menu__button paddock-menu__button--delete\">\n          Delete fence\n        </button>\n      `;\n    shapeMenuContainer.appendChild(div);\n\n    shapeMenuContainer.setAttribute(\"aria-hidden\", false);\n\n    map.setOptions({\n      draggable: false,\n    });\n  });\n};\n\n// SETUP\n\nconst bindMapEvents = () => {\n  // bind functions\n  const ignoreKeyPress = (e) => {\n    if (e.keyCode === 13) {\n      e.preventDefault();\n    }\n  };\n  searchField.addEventListener(\"keypress\", ignoreKeyPress);\n\n  plottingShapes.addEventListener(\"click\", handleShapesTable);\n  // plottingShapes.addEventListener(\"focus\", handleEditSelectPaddockName);\n  plottingShapes.addEventListener(\"input\", handleEditPaddockName);\n  newSearchBtn.addEventListener(\"click\", handleResetSearch);\n  savePaddockBtn.addEventListener(\"click\", handleAddPlotting);\n  setPlottingBtn.addEventListener(\"click\", handleUsePlotting);\n  deletePlottingBtn.addEventListener(\"click\", handleDeleteAllPlotting);\n\n  resetBtn.forEach((button) => {\n    button.addEventListener(\"click\", handleResetSearch);\n  });\n\n  dragMapTool.addEventListener(\"click\", handleDragTool);\n  lineMapTool.addEventListener(\"click\", handleLineTool);\n  shapeMapTool.addEventListener(\"click\", handleShapeTool);\n  zoomInTool.addEventListener(\"click\", handleZoomInTool);\n  zoomOutTool.addEventListener(\"click\", handleZoomOutTool);\n\n  // UI\n\n  HELPERS.setDraggableMapTools(mapTools);\n\n  HELPERS.setClosableSidebar(sidebar, removePaddockMenu);\n\n  shapeMenuContainer.addEventListener(\"click\", handleShapesTable);\n\n  // PRINT\n  printBtn.addEventListener(\"click\", handlePrintMap);\n  downloadBtn.addEventListener(\"click\", handleDownloadMap);\n\n  downloadFormName.addEventListener(\"change\", validateDownloadName);\n  downloadFormEmail.addEventListener(\"change\", validateDownloadEmail);\n};\n\nexport const setup = () => {\n  assignElements();\n  bindMapEvents();\n};\n\nexport { google };\n","let shapeMenuContainer,\n  sidebar,\n  mapTools,\n  mapContainer,\n  addressSearchContainer,\n  addressContainer,\n  addressResultsContainer,\n  plottingResultsContainer,\n  plottingTooltip,\n  plottingShapes,\n  searchField,\n  newSearchBtn,\n  savePaddockBtn,\n  setPlottingBtn,\n  deletePlottingBtn,\n  resetBtn,\n  printBtn,\n  downloadBtn,\n  closeDownloadBtn,\n  dragMapTool,\n  lineMapTool,\n  shapeMapTool,\n  zoomInTool,\n  zoomOutTool,\n  currentAddressLabel,\n  plottingPerimiterLabel,\n  downloadFormName,\n  downloadFormNameError,\n  downloadFormEmail,\n  downloadFormEmailError;\n\nexport const assignElements = () => {\n  // find elements\n  mapContainer = document.getElementById(\"fence-estimator-map\");\n\n  addressSearchContainer = document.querySelectorAll(\n    \".map-search-controller__searcher\"\n  )[0];\n  addressContainer = document.querySelectorAll(\n    \".map-search-results__step-1\"\n  )[0];\n  addressResultsContainer = document.querySelectorAll(\n    \".map-search-results-controller\"\n  )[0];\n  plottingResultsContainer = document.querySelectorAll(\n    \".map-plotting-results-controller\"\n  )[0];\n  plottingTooltip = document.querySelectorAll(\n    \".map-search-results__shapes-tip\"\n  )[0];\n\n  plottingShapes = document.querySelectorAll(\n    \".map-search-results__shapes-table\"\n  )[0];\n\n  searchField = document.querySelectorAll(\".search-address__field\")[0];\n  newSearchBtn = document.querySelectorAll(\n    \".search-address__new-search-button\"\n  )[0];\n  currentAddressLabel = document.querySelectorAll(\n    \".map-search-results__address\"\n  )[0];\n\n  savePaddockBtn = document.querySelectorAll(\n    \".plotting__save-paddock-button\"\n  )[0];\n  setPlottingBtn = document.querySelectorAll(\".plotting__accept-button\")[0];\n  deletePlottingBtn = document.querySelectorAll(\".plotting__delete-button\")[0];\n  plottingPerimiterLabel = document.querySelectorAll(\n    \".map-plotting-results__perimiter\"\n  )[0];\n\n  resetBtn = document.querySelectorAll(\".reset-button\");\n  printBtn = document.querySelectorAll(\".plotting__print-button\")[0];\n  downloadBtn = document.querySelectorAll(\".plotting__download-button\")[0];\n  closeDownloadBtn = document.querySelectorAll(\n    \".plotting__close-download-button\"\n  )[0];\n\n  dragMapTool = document.querySelectorAll(\".map-tool-drag\")[0];\n  lineMapTool = document.querySelectorAll(\".map-tool-line\")[0];\n  shapeMapTool = document.querySelectorAll(\".map-tool-shape\")[0];\n  zoomInTool = document.querySelectorAll(\".map-tool-zoomin\")[0];\n  zoomOutTool = document.querySelectorAll(\".map-tool-zoomout\")[0];\n\n  mapTools = document.querySelectorAll(\".map-search-tools-controller\")[0];\n  sidebar = document.querySelectorAll(\".map-search-sidebar\")[0];\n  shapeMenuContainer = document.querySelectorAll(\".paddock-menu-container\")[0];\n\n  downloadFormName = document.querySelectorAll(\".plotting__download-name\")[0];\n  downloadFormNameError = document.querySelectorAll(\n    \".download-form__error--name\"\n  )[0];\n  downloadFormEmail = document.querySelectorAll(\".plotting__download-email\")[0];\n  downloadFormEmailError = document.querySelectorAll(\n    \".download-form__error--email\"\n  )[0];\n};\n\nexport {\n  shapeMenuContainer,\n  sidebar,\n  mapTools,\n  mapContainer,\n  addressSearchContainer,\n  addressContainer,\n  addressResultsContainer,\n  plottingResultsContainer,\n  plottingTooltip,\n  plottingShapes,\n  searchField,\n  newSearchBtn,\n  savePaddockBtn,\n  setPlottingBtn,\n  deletePlottingBtn,\n  resetBtn,\n  printBtn,\n  downloadBtn,\n  closeDownloadBtn,\n  dragMapTool,\n  lineMapTool,\n  shapeMapTool,\n  zoomInTool,\n  zoomOutTool,\n  currentAddressLabel,\n  plottingPerimiterLabel,\n  downloadFormName,\n  downloadFormNameError,\n  downloadFormEmail,\n  downloadFormEmailError,\n};\n","import { Loader } from \"google-maps\";\nimport { MAP_SETTINGS } from \"../constants\";\nimport { createMap, setup } from \"./loadedMap.module\";\n\nconst mapLoader = new Loader(MAP_SETTINGS.key, MAP_SETTINGS.options);\nlet google;\n\nconst start = () => {\n  setup();\n\n  createMap();\n};\n\nexport const init = async () => {\n  if (!document.getElementById(\"fence-estimator-map\")) {\n    return false;\n  }\n\n  if (!google) {\n    google = await mapLoader.load();\n  }\n\n  start();\n};\n\nexport { google };\n"],"sourceRoot":""}